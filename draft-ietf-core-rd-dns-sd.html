<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" 
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html lang="en" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head profile="http://www.w3.org/2006/03/hcard http://dublincore.org/documents/2008/08/04/dc-html/">
  <meta http-equiv="Content-Type" content="text/html; charset=us-ascii" />

  <title>CoRE Resource Directory: DNS-SD mapping</title>

  
<style type="text/css">/*<![CDATA[*/
@viewport {
  zoom: 1.0;
  width: extend-to-zoom;
}
@-ms-viewport {
  width: extend-to-zoom;
  zoom: 1.0;
}

@media screen and (min-width: 1024px) {
  ul.toc, #rfc\.toc {
    position: fixed;
    bottom: 0;
    right: 0;
    right: calc(50vw - 500px);
    width: 300px;
    padding: 0 1em;
    z-index: 1;
  }
  #rfc\.toc {
    top: 16px;
  }
  ul.toc {
    top: 80px;
    overflow: auto;
  }

  body {
    padding-left: 1.5em;
    padding-right: 29em;
  }
}

body {
  font: 15px "Helvetica Neue",Helvetica,Arial,sans-serif;
  color: #333;
  font-size-adjust: 0.5;
  line-height: 130%;
  margin: 2.5em auto;
  max-width: 724px;
}

.title, .filename, h1, h2, h3, h4 {
  font-family: "Helvetica Neue",Helvetica,Arial,sans-serif;
  font-size-adjust: 0.5;
  font-weight: 500;
  color: #333;
  line-height: 100%;
  margin: 0.8em 0 0.3em;
}
.title { font-size: 36px; }
h1 { font-size: 30px; }
h2 { font-size: 24px; }
h3, h4 { font-size: 18px; }
h1 a[href], h2 a[href], h3 a[href], h4 a[href] {
  color: #333;
}

ul.toc li {
  list-style: none;
  text-indent: -2.5em;
  padding-left: 2.5em;
  padding-bottom: 5px;
  margin: 0;
}
ul.toc ul {
  margin: 0;
}
/* xml2rfc nests ul directly inside ul which messes with the style badly */
ul.toc, ul.toc>ul, ul.toc ul>ul {
  margin: 0 0 0 1.5em;
}

table {
  margin-left: 0em;
  border-collapse: collapse;
}
th {
  text-align: left;
  border-bottom: 2px solid #ddd;
}
td {
  border-top: 1px solid #ddd;
  vertical-align: top;
}
tr:nth-child(2n+1) > td,
tr:nth-child(2n+1) > th {
  background-color: #f9f9f9;
}
td.reference {
  max-width: 200px;
  border-top: none;
  padding-right: 1em;
}
.right {
  text-align: right;
}


table.header {
  width: 100%;
}
table.header td {
  border: none;
  background-color: transparent;
  color: black;
}
.filename {
  color: rgb(119, 119, 119);
  font-size: 23px;
  font-weight: normal;
  height: auto;
  line-height: 100%;
}
#rfc\.abstract+p {
  font-size: 20px;
  font-weight: 300;
  line-height: 130%;
}

samp, tt, code, pre {
  font: 11pt consolas, monospace;
  font-size-adjust: none;
}
pre {
  background-color: #eee;
  border: 1px solid #ddd;
  overflow-x: auto;
  padding: 5px;
  margin: 5px;
}
.figure {
  font-style: italic;
  margin: 0 1.5em;
}

address {
  margin: 10px 0 0;
}
.vcard {
  font-style: normal;
}
.vcardline {
  display: block;
}
.vcardline .fn {
  font-weight: bold;
}
.vcardline .hidden {
  display: none;
}

dl {
  margin-left: 1em;
}
dl.dl-horizontal: {
  margin-left: 0;
}
dl > dt {
  float: left;
  margin-right: 1em;
}
dl.nohang > dt {
  float: none;
}
dl > dd {
  margin-bottom: .5em;
}
dl.compact > dd {
  margin-bottom: 0em;
}
dl > dd > dl {
  margin-top: 0.5em;
  margin-bottom: 0em;
}
ul.empty {
  list-style-type: none;
}
ul.empty li {
  margin-top: .5em;
}

hr {
  border: 0;
  border-top: 1px solid #eee;
}

a {
  text-decoration: none;
}
a[href] {
  color: #2a6496;
}
a[href]:hover {
  background-color: #eee;
}

ol, ul, li, p {
  padding: 0;
  margin: 0.5em 0 0.5em 2em;
}
li, p {
  margin-left: 0;
}
address {
  font-style: normal;
}

.github-fork-ribbon-wrapper {
  display: none;
}
@media screen and (min-width: 800px) {
  /* "Fork me on GitHub" CSS ribbon based on
   * https://github.com/simonwhitaker/github-fork-ribbon-css
   */
  .github-fork-ribbon {
    position: absolute;
    padding: 2px 0;
    background-color: #a00;
    background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0), rgba(0, 0, 0, 0.15));
    box-shadow: 0 2px 3px 0 rgba(0, 0, 0, 0.5);
    font: 700 12px "Helvetica Neue", Helvetica, Arial, sans-serif;

    pointer-events: auto;

    top: 38px;
    right: -45px;

    transform: rotate(45deg);
  }

  .github-fork-ribbon a[href],
  .github-fork-ribbon a[href]:hover {
    color: #fff;
    background-color: transparent;
    text-decoration: none;
    text-shadow: 0 -1px rgba(0, 0, 0, 0.5);
    text-align: center;

    width: 190px;
    line-height: 18px;

    display: inline-block;
    padding: 2px 0;

    border: 1.5px dotted #fff;
    border-color: rgba(255, 255, 255, 0.6);
  }

  .github-fork-ribbon-wrapper {
    display: block;
    width: 130px;
    height: 130px;
    position: absolute;
    overflow: hidden;
    top: 0; right: 0;
    z-index: 2;
    pointer-events: none;
  }
}
@media screen and (min-width: 1000px) {
  .github-fork-ribbon-wrapper {
    position: fixed;
  }
  /*]]>*/</style>


  <link href="#rfc.toc" rel="Contents"/>
<link href="#rfc.section.1" rel="Chapter" title="1 Introduction"/>
<link href="#rfc.section.1.1" rel="Chapter" title="1.1 Terminology"/>
<link href="#rfc.section.2" rel="Chapter" title="2 New Link-Format Attributes"/>
<link href="#rfc.section.2.1" rel="Chapter" title="2.1 Resource Instance attribute &#x2018;ins&#x2019;"/>
<link href="#rfc.section.2.2" rel="Chapter" title="2.2 Export attribute &#x2018;exp&#x2019;"/>
<link href="#rfc.section.3" rel="Chapter" title="3 DNS-SD Mapping"/>
<link href="#rfc.section.3.1" rel="Chapter" title="3.1 DNS-based Service discovery"/>
<link href="#rfc.section.3.2" rel="Chapter" title="3.2 mapping ins to &lt;Instance&gt;"/>
<link href="#rfc.section.3.3" rel="Chapter" title="3.3 Mapping rt to &lt;ServiceType&gt;"/>
<link href="#rfc.section.3.4" rel="Chapter" title="3.4 Domain mapping"/>
<link href="#rfc.section.3.5" rel="Chapter" title="3.5 TXT Record key=value strings"/>
<link href="#rfc.section.3.6" rel="Chapter" title="3.6 Importing resource links into DNS-SD"/>
<link href="#rfc.section.4" rel="Chapter" title="4 Examples"/>
<link href="#rfc.section.4.1" rel="Chapter" title="4.1 DNS entries"/>
<link href="#rfc.section.5" rel="Chapter" title="5 IANA considerations"/>
<link href="#rfc.section.6" rel="Chapter" title="6 Security considerations"/>
<link href="#rfc.references" rel="Chapter" title="7 References"/>
<link href="#rfc.references.1" rel="Chapter" title="7.1 Normative References"/>
<link href="#rfc.references.2" rel="Chapter" title="7.2 Informative References"/>
<link href="#rfc.acknowledgements" rel="Chapter"/>
<link href="#rfc.authors" rel="Chapter"/>


  <meta name="generator" content="xml2rfc version 2.5.2 - http://tools.ietf.org/tools/xml2rfc" />
  <link rel="schema.dct" href="http://purl.org/dc/terms/" />

  <meta name="dct.creator" content="Defined, T." />
  <meta name="dct.identifier" content="urn:ietf:id:draft-ietf-core-rd-dns-sd-latest" />
  <meta name="dct.issued" scheme="ISO8601" content="2017-3-26" />
  <meta name="dct.abstract" content="TBD" />
  <meta name="description" content="TBD" />

</head>

<body>

  <table class="header">
    <tbody>
    
    	<tr>
  <td class="left">CoRE</td>
  <td class="right">T. Defined</td>
</tr>
<tr>
  <td class="left">Internet-Draft</td>
  <td class="right">March 26, 2017</td>
</tr>
<tr>
  <td class="left">Intended status: Standards Track</td>
  <td class="right"></td>
</tr>
<tr>
  <td class="left">Expires: September 27, 2017</td>
  <td class="right"></td>
</tr>

    	
    </tbody>
  </table>

  <p class="title">CoRE Resource Directory: DNS-SD mapping<br />
  <span class="filename">draft-ietf-core-rd-dns-sd-latest</span></p>
  
  <h1 id="rfc.abstract">
  <a href="#rfc.abstract">Abstract</a>
</h1>
<p>TBD</p>
<h1 id="rfc.status">
  <a href="#rfc.status">Status of This Memo</a>
</h1>
<p>This Internet-Draft is submitted in full conformance with the provisions of BCP 78 and BCP 79.</p>
<p>Internet-Drafts are working documents of the Internet Engineering Task Force (IETF).  Note that other groups may also distribute working documents as Internet-Drafts.  The list of current Internet-Drafts is at http://datatracker.ietf.org/drafts/current/.</p>
<p>Internet-Drafts are draft documents valid for a maximum of six months and may be updated, replaced, or obsoleted by other documents at any time.  It is inappropriate to use Internet-Drafts as reference material or to cite them other than as "work in progress."</p>
<p>This Internet-Draft will expire on September 27, 2017.</p>
<h1 id="rfc.copyrightnotice">
  <a href="#rfc.copyrightnotice">Copyright Notice</a>
</h1>
<p>Copyright (c) 2017 IETF Trust and the persons identified as the document authors.  All rights reserved.</p>
<p>This document is subject to BCP 78 and the IETF Trust's Legal Provisions Relating to IETF Documents (http://trustee.ietf.org/license-info) in effect on the date of publication of this document.  Please review these documents carefully, as they describe your rights and restrictions with respect to this document.  Code Components extracted from this document must include Simplified BSD License text as described in Section 4.e of the Trust Legal Provisions and are provided without warranty as described in the Simplified BSD License.</p>

  
  <hr class="noprint" />
  <h1 class="np" id="rfc.toc"><a href="#rfc.toc">Table of Contents</a></h1>
  <ul class="toc">

  	<li>1.   <a href="#rfc.section.1">Introduction</a></li>
<ul><li>1.1.   <a href="#rfc.section.1.1">Terminology</a></li>
</ul><li>2.   <a href="#rfc.section.2">New Link-Format Attributes</a></li>
<ul><li>2.1.   <a href="#rfc.section.2.1">Resource Instance attribute &#8216;ins&#8217;</a></li>
<li>2.2.   <a href="#rfc.section.2.2">Export attribute &#8216;exp&#8217;</a></li>
</ul><li>3.   <a href="#rfc.section.3">DNS-SD Mapping</a></li>
<ul><li>3.1.   <a href="#rfc.section.3.1">DNS-based Service discovery</a></li>
<li>3.2.   <a href="#rfc.section.3.2">mapping ins to &lt;Instance&gt;</a></li>
<li>3.3.   <a href="#rfc.section.3.3">Mapping rt to &lt;ServiceType&gt;</a></li>
<li>3.4.   <a href="#rfc.section.3.4">Domain mapping</a></li>
<li>3.5.   <a href="#rfc.section.3.5">TXT Record key=value strings</a></li>
<li>3.6.   <a href="#rfc.section.3.6">Importing resource links into DNS-SD</a></li>
</ul><li>4.   <a href="#rfc.section.4">Examples</a></li>
<ul><li>4.1.   <a href="#rfc.section.4.1">DNS entries</a></li>
</ul><li>5.   <a href="#rfc.section.5">IANA considerations</a></li>
<li>6.   <a href="#rfc.section.6">Security considerations</a></li>
<li>7.   <a href="#rfc.references">References</a></li>
<ul><li>7.1.   <a href="#rfc.references.1">Normative References</a></li>
<li>7.2.   <a href="#rfc.references.2">Informative References</a></li>
</ul><li><a href="#rfc.acknowledgements">Acknowledgements</a></li>
<li><a href="#rfc.authors">Author's Address</a></li>


  </ul>

  <h1 id="rfc.section.1"><a href="#rfc.section.1">1.</a> <a href="#introduction" id="introduction">Introduction</a></h1>
<p id="rfc.section.1.p.1">TBD &#8230; <a href="#RFC7252">[RFC7252]</a> &#8230; <a href="#I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</a> &#8230; DNS-SD</p>
<h1 id="rfc.section.1.1"><a href="#rfc.section.1.1">1.1.</a> <a href="#terminology" id="terminology">Terminology</a></h1>
<p id="rfc.section.1.1.p.1">The key words &#8220;MUST&#8221;, &#8220;MUST NOT&#8221;, &#8220;REQUIRED&#8221;, &#8220;SHALL&#8221;, &#8220;SHALL NOT&#8221;, &#8220;SHOULD&#8221;, &#8220;SHOULD NOT&#8221;, &#8220;RECOMMENDED&#8221;, &#8220;NOT RECOMMENDED&#8221;, &#8220;MAY&#8221;, and &#8220;OPTIONAL&#8221; in this document are to be interpreted as described in <a href="#RFC2119">[RFC2119]</a>. The term &#8220;byte&#8221; is used in its now customary sense as a synonym for &#8220;octet&#8221;.</p>
<p id="rfc.section.1.1.p.2">This specification requires readers to be familiar with all the terms and concepts that are discussed in <a href="#RFC5988">[RFC5988]</a> and <a href="#RFC6690">[RFC6690]</a>. Readers should also be familiar with the terms and concepts discussed in <a href="#RFC7252">[RFC7252]</a>.  To describe the REST interfaces defined in this specification, the URI Template format is used <a href="#RFC6570">[RFC6570]</a>.</p>
<p id="rfc.section.1.1.p.3">This specification makes use of the terminology of <a href="#I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</a>.</p>
<p id="rfc.section.1.1.p.4">This specification makes use of the following additional terminology:</p>
<p/>

<dl>
  <dt>TBD:</dt>
  <dd style="margin-left: 8">TBD</dd>
  <dt>TBD:</dt>
  <dd style="margin-left: 8">TBD</dd>
</dl>
<h1 id="rfc.section.2"><a href="#rfc.section.2">2.</a> <a href="#attributes" id="attributes">New Link-Format Attributes</a></h1>
<p id="rfc.section.2.p.1">When using the CoRE Link Format to describe resources being discovered by or posted to a resource directory service, additional information about those resources is useful. This specification defines the following new attributes for use in the CoRE Link Format <a href="#RFC6690">[RFC6690]</a>:</p>
<pre>
   link-extension    = ( "ins" "=" (ptoken | quoted-string) )
                       ; The token or string is max 63 bytes
   link-extension    = ( "exp" )
</pre>
<h1 id="rfc.section.2.1"><a href="#rfc.section.2.1">2.1.</a> <a href="#resource-instance-attribute-ins" id="resource-instance-attribute-ins">Resource Instance attribute &#8216;ins&#8217;</a></h1>
<p id="rfc.section.2.1.p.1">The Resource Instance &#8220;ins&#8221; attribute is an identifier for this resource, which makes it possible to distinguish it from other similar resources. This attribute is similar in use to the &lt;Instance&gt; portion of a DNS-SD record (see <a href="#cheshire">Section 3.1</a>, and SHOULD be unique across resources with the same Resource Type attribute in the domain it is used. A Resource Instance might be a descriptive string like &#8220;Ceiling Light, Room 3&#8221;, a short ID like &#8220;AF39&#8221; or a unique UUID or iNumber. This attribute is used by a Resource Directory to distinguish between multiple instances of the same resource type within the directory.</p>
<p id="rfc.section.2.1.p.2">This attribute MUST be no more than 63 bytes in length. The resource identifier attribute MUST NOT appear more than once in a link description.  This attribute MAY be used as a query parameter in the RD Lookup Function Set defined in Section 7.</p>
<h1 id="rfc.section.2.2"><a href="#rfc.section.2.2">2.2.</a> <a href="#export-attribute-exp" id="export-attribute-exp">Export attribute &#8216;exp&#8217;</a></h1>
<p id="rfc.section.2.2.p.1">The Export &#8220;exp&#8221; attribute is used as a flag to indicate that a link description MAY be exported by a resource directory to external directories.</p>
<p id="rfc.section.2.2.p.2">The CoRE Link Format is used for many purposes between CoAP endpoints. Some are useful mainly locally, for example checking the observability of a resource before accessing it, determining the size of a resource, or traversing dynamic resource structures. However, other links are very useful to be exported to other directories, for example the entry point resource to a functional service.  This attribute MAY be used as a query parameter in the RD Lookup Function Set defined in Section 7.</p>
<h1 id="rfc.section.3"><a href="#rfc.section.3">3.</a> <a href="#dns-sd" id="dns-sd">DNS-SD Mapping</a></h1>
<p id="rfc.section.3.p.1">CoRE Resource Discovery is intended to support fine-grained discovery of hosted resources, their attributes, and possibly other resource relations <a href="#RFC6690">[RFC6690]</a>. In contrast, service discovery generally refers to a coarse-grained resolution of an endpoint&#8217;s IP address, port number, and protocol.</p>
<p id="rfc.section.3.p.2">Resource and service discovery are complementary in the case of large networks, where the latter can facilitate scaling.  This document defines a mapping between CoRE Link Format attributes and DNS-Based Service Discovery <a href="#RFC6763">[RFC6763]</a> fields that permits discovery of CoAP services by either method.</p>
<h1 id="rfc.section.3.1"><a href="#rfc.section.3.1">3.1.</a> <a href="#cheshire" id="cheshire">DNS-based Service discovery</a></h1>
<p id="rfc.section.3.1.p.1">DNS-Based Service Discovery (DNS-SD) defines a conventional method of configuring DNS PTR, SRV, and TXT resource records to facilitate discovery of services (such as CoAP servers in a subdomain) using the existing DNS infrastructure.  This section gives a brief overview of DNS-SD; see <a href="#RFC6763">[RFC6763]</a> for a detailed specification.</p>
<p id="rfc.section.3.1.p.2">DNS-SD service names are limited to 255 octets and are of the form:</p>
<p id="rfc.section.3.1.p.3">Service Name = &lt;Instance&gt;.&lt;ServiceType&gt;.&lt;Domain&gt;.</p>
<p id="rfc.section.3.1.p.4">The service name is the label of SRV/TXT resource records. The SRV RR specifies the host and the port of the endpoint. The TXT RR provides additional information in the form of key/value pairs.</p>
<p id="rfc.section.3.1.p.5">The &lt;Domain&gt; part of the service name is identical to the global (DNS subdomain) part of the authority in URIs that identify servers or groups of servers.</p>
<p id="rfc.section.3.1.p.6">The &lt;ServiceType&gt; part is composed of at least two labels.  The first label of the pair is the application protocol name <a href="#RFC6335">[RFC6335]</a> preceded by an underscore character.  The second label indicates the transport and is always &#8220;_udp&#8221; for UDP-based CoAP services.  In cases where narrowing the scope of the search may be useful, these labels may be optionally preceded by a subtype name followed by the &#8220;_sub&#8221; label.  An example of this more specific &lt;ServiceType&gt; is &#8220;light._sub._dali._udp&#8221;.</p>
<p id="rfc.section.3.1.p.7">A default &lt;Instance&gt; part of the service name may be set at the factory or during the commissioning process.  It SHOULD uniquely identify an instance of &lt;ServiceType&gt; within a &lt;Domain&gt;.  Taken together, these three elements comprise a unique name for an SRV/ TXT record pair within the DNS subdomain.</p>
<p id="rfc.section.3.1.p.8">The granularity of a service name MAY be that of a host or group, or it could represent a particular resource within a CoAP server.  The SRV record contains the host name (AAAA record name) and port of the service while protocol is part of the service name.  In the case where a service name identifies a particular resource, the path part of the URI must be carried in a corresponding TXT record.</p>
<p id="rfc.section.3.1.p.9">A DNS TXT record is in practice limited to a few hundred octets in length, which is indicated in the resource record header in the DNS response message.  The data consists of one or more strings comprising a key=value pair.  By convention, the first pair is txtver=&lt;number&gt; (to support different versions of a service description).</p>
<h1 id="rfc.section.3.2"><a href="#rfc.section.3.2">3.2.</a> <a href="#ins" id="ins">mapping ins to &lt;Instance&gt;</a></h1>
<p id="rfc.section.3.2.p.1">The Resource Instance &#8220;ins&#8221; attribute maps to the &lt;Instance&gt; part of a DNS-SD service name.  It is stored directly in the DNS as a single DNS label of canonical precomposed UTF-8 <a href="#RFC3629">[RFC3629]</a> &#8220;Net-Unicode&#8221; (Unicode Normalization Form C) <a href="#RFC5198">[RFC5198]</a> text.  However, to the extent that the &#8220;ins&#8221; attribute may be chosen to match the DNS host name of a service, it SHOULD use the syntax defined in Section 3.5 of <a href="#RFC1034">[RFC1034]</a> and Section 2.1 of <a href="#RFC1123">[RFC1123]</a>.</p>
<p id="rfc.section.3.2.p.2">The &lt;Instance&gt; part of the name of a service being offered on the network SHOULD be configurable by the user setting up the service, so that he or she may give it an informative name.  However, the device or service SHOULD NOT require the user to configure a name before it can be used.  A sensible choice of default name can allow the device or service to be accessed in many cases without any manual configuration at all.  The default name should be short and descriptive, and MAY include a collision-resistant substring such as the lower bits of the device&#8217;s MAC address, serial number, fingerprint, or other identifier in an attempt to make the name relatively unique.</p>
<p id="rfc.section.3.2.p.3">DNS labels are currently limited to 63 octets in length and the entire service name may not exceed 255 octets.</p>
<h1 id="rfc.section.3.3"><a href="#rfc.section.3.3">3.3.</a> <a href="#exp" id="exp">Mapping rt to &lt;ServiceType&gt;</a></h1>
<p id="rfc.section.3.3.p.1">The resource type &#8220;rt&#8221; attribute is mapped into the &lt;ServiceType&gt; part of a DNS-SD service name and SHOULD conform to the reg-rel-type production of the Link Format defined in Section 2 of <a href="#RFC6690">[RFC6690]</a>.  The &#8220;rt&#8221; attribute MUST be composed of at least a single Net-Unicode text string, without underscore &#8216;_&#8217; or period &#8216;.&#8217; and limited to 15 octets in length, which represents the application protocol name.  This string is mapped to the DNS-SD &lt;ServiceType&gt; by prepending an underscore and appending a period followed by the &#8220;_udp&#8221; label.  For example, rt=&#8221;dali&#8221; is mapped into &#8220;_dali._udp&#8221;.</p>
<p id="rfc.section.3.3.p.2">The application protocol name may be optionally followed by a period and a service subtype name consisting of a Net-Unicode text string, without underscore or period and limited to 63 octets.  This string is mapped to the DNS-SD &lt;ServiceType&gt; by appending a period followed by the &#8220;_sub&#8221; label and then appending a period followed by the service type label pair derived as in the previous paragraph.  For example, rt=&#8221;dali.light&#8221; is mapped into &#8220;light._sub._dali._udp&#8221;.</p>
<p id="rfc.section.3.3.p.3">The resulting string is used to form labels for DNS-SD records which are stored directly in the DNS.</p>
<h1 id="rfc.section.3.4"><a href="#rfc.section.3.4">3.4.</a> <a href="#domain" id="domain">Domain mapping</a></h1>
<p id="rfc.section.3.4.p.1">DNS domains may be derived from the &#8220;d&#8221; attribute. The domain attribute may be suffixed with the zone name of the authoritative DNS server to generate the domain name. The &#8220;ep&#8221; attribute is prefixed to the domain name to generate the FQDN to be stored into DNS with an AAAA RR.</p>
<h1 id="rfc.section.3.5"><a href="#rfc.section.3.5">3.5.</a> <a href="#TXT" id="TXT">TXT Record key=value strings</a></h1>
<p id="rfc.section.3.5.p.1">A number of <a href="#RFC6763">[RFC6763]</a> key/value pairs are derived from link-format information, to be exported in the DNS-SD as key=value strings in a TXT record (<a href="#RFC6763">[RFC6763]</a>, Section 6.3).</p>
<p id="rfc.section.3.5.p.2">The resource &lt;URI&gt; is exported as key/value pair &#8220;path=&lt;URI&gt;&#8221;.</p>
<p id="rfc.section.3.5.p.3">The Interface Description &#8220;if&#8221; attribute is exported as key/value pair &#8220;if=&lt;Interface Description&gt;&#8221;.</p>
<p id="rfc.section.3.5.p.4">The DNS TXT record can be further populated by importing any other resource description attributes as they share the same key=value format specified in Section 6 of <a href="#RFC6763">[RFC6763]</a>.</p>
<h1 id="rfc.section.3.6"><a href="#rfc.section.3.6">3.6.</a> <a href="#import" id="import">Importing resource links into DNS-SD</a></h1>
<p id="rfc.section.3.6.p.1">Assuming the ability to query a Resource Directory or multicast a GET (?exp) over the local link, CoAP resource discovery may be used to populate the DNS-SD database in an automated fashion.  CoAP resource descriptions (links) can be exported to DNS-SD for exposure to service discovery by using the Resource Instance attribute as the basis for a unique service name, composed with the Resource Type as the &lt;ServiceType&gt;, and registered in the correct &lt;Domain&gt;.  The agent responsible for exporting records to the DNS zone file SHOULD be authenticated to the DNS server.  The following example, using the example lookup location /rd-lookup, shows an agent discovering a resource to be exported:</p>
<pre>
   Req: GET /rd-lookup/res?exp

   Res: 2.05 Content
   &lt;coap://[FDFD::1234]:5683/light/1&gt;;
     exp;rt="dali.light";ins="Spot";
               d="office";ep="node1"

</pre>
<p id="rfc.section.3.6.p.2">The agent subsequently registers the following DNS-SD RRs, assuming a zone name &#8220;example.com&#8221; prefixed with &#8220;office&#8221;:</p>
<pre>
node1.office.example.com.          IN AAAA        FDFD::1234
_dali._udp.office.example.com      IN PTR
                          Spot._dali._udp.office.example.com
light._sub._dali._udp.example.com  IN PTR
                          Spot._dali._udp.office.example.com
Spot._dali._udp.office.example.com IN SRV  0 0 5683
                          node1.office.example.com.
Spot._dali._udp.office.example.com IN TXT
                          txtver=1;path=/light/1
</pre>
<p id="rfc.section.3.6.p.3">In the above figure the Service Name is chosen as Spot._dali._udp.office.example.com without the light._sub service prefix. An alternative Service Name would be: Spot.light._sub._dali._udp.office.example.com.</p>
<h1 id="rfc.section.4"><a href="#rfc.section.4">4.</a> <a href="#examples" id="examples">Examples</a></h1>
<h1 id="rfc.section.4.1"><a href="#rfc.section.4.1">4.1.</a> <a href="#dns-en" id="dns-en">DNS entries</a></h1>
<p id="rfc.section.4.1.p.1">It may be profitable to discover the light groups for applications, which are unaware ot the existence of the RD. An agent needs to query the RD to return all groups which are exported to be inserted into DNS.</p>
<pre>
   Req: GET /rd-lookup/gp?exp

   Res: 2.05 Content
   &lt;coap://[FF05::1]/&gt;;exp;gp="grp_R2-4-015;ins="grp1234";
ep="lm_R2-4-015_wndw";
ep="lm_R2-4-015_door

</pre>
<p id="rfc.section.4.1.p.2">The group with FQDN grp_R2-4-015.bc.example.com can be entered into the DNS by the agent. The accompanying instance name is grp1234. The &lt;ServiceType&gt; is chosen to be _group._udp. The agent enters the following RRs into the DNS.</p>
<pre>
grp_R2-4-015.bc.example.com.        IN AAAA            FF05::1
_group._udp.bc.example.com          IN PTR
                            grp1234._group._udp.bc.example.com
grp1234._group._udp.bc.example.com  IN SRV  0 0 5683
                             grp_R2-4-015_door.bc.example.com.
grp1234._group._udp.bc.example.com  IN TXT
                                     txtver=1;path=/light/grp1
</pre>
<p id="rfc.section.4.1.p.3">From then on applications, not familiar with the existence of the RD, can use DNS to access the lighting group.</p>
<h1 id="rfc.section.5"><a href="#rfc.section.5">5.</a> <a href="#iana-considerations" id="iana-considerations">IANA considerations</a></h1>
<p id="rfc.section.5.p.1">TBD</p>
<h1 id="rfc.section.6"><a href="#rfc.section.6">6.</a> <a href="#security-considerations" id="security-considerations">Security considerations</a></h1>
<p id="rfc.section.6.p.1">TBD</p>
<h1 id="rfc.references"><a href="#rfc.references">7.</a> References</h1>
<h1 id="rfc.references.1"><a href="#rfc.references.1">7.1.</a> Normative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Koster, M.</a>, <a>Bormann, C.</a> and <a>P. Stok</a>, "<a href="http://tools.ietf.org/html/draft-ietf-core-resource-directory-10">CoRE Resource Directory</a>", Internet-Draft draft-ietf-core-resource-directory-10, March 2017.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC2119">[RFC2119]</b>
      </td>
      <td class="top"><a>Bradner, S.</a>, "<a href="http://tools.ietf.org/html/rfc2119">Key words for use in RFCs to Indicate Requirement Levels</a>", BCP 14, RFC 2119, DOI 10.17487/RFC2119, March 1997.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5988">[RFC5988]</b>
      </td>
      <td class="top"><a>Nottingham, M.</a>, "<a href="http://tools.ietf.org/html/rfc5988">Web Linking</a>", RFC 5988, DOI 10.17487/RFC5988, October 2010.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6335">[RFC6335]</b>
      </td>
      <td class="top"><a>Cotton, M.</a>, <a>Eggert, L.</a>, <a>Touch, J.</a>, <a>Westerlund, M.</a> and <a>S. Cheshire</a>, "<a href="http://tools.ietf.org/html/rfc6335">Internet Assigned Numbers Authority (IANA) Procedures for the Management of the Service Name and Transport Protocol Port Number Registry</a>", BCP 165, RFC 6335, DOI 10.17487/RFC6335, August 2011.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6570">[RFC6570]</b>
      </td>
      <td class="top"><a>Gregorio, J.</a>, <a>Fielding, R.</a>, <a>Hadley, M.</a>, <a>Nottingham, M.</a> and <a>D. Orchard</a>, "<a href="http://tools.ietf.org/html/rfc6570">URI Template</a>", RFC 6570, DOI 10.17487/RFC6570, March 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6690">[RFC6690]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, "<a href="http://tools.ietf.org/html/rfc6690">Constrained RESTful Environments (CoRE) Link Format</a>", RFC 6690, DOI 10.17487/RFC6690, August 2012.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC6763">[RFC6763]</b>
      </td>
      <td class="top"><a>Cheshire, S.</a> and <a>M. Krochmal</a>, "<a href="http://tools.ietf.org/html/rfc6763">DNS-Based Service Discovery</a>", RFC 6763, DOI 10.17487/RFC6763, February 2013.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.references.2"><a href="#rfc.references.2">7.2.</a> Informative References</h1>
<table>
  <tbody>
    <tr>
      <td class="reference">
        <b id="RFC1034">[RFC1034]</b>
      </td>
      <td class="top"><a>Mockapetris, P.</a>, "<a href="http://tools.ietf.org/html/rfc1034">Domain names - concepts and facilities</a>", STD 13, RFC 1034, DOI 10.17487/RFC1034, November 1987.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC1123">[RFC1123]</b>
      </td>
      <td class="top"><a>Braden, R.</a>, "<a href="http://tools.ietf.org/html/rfc1123">Requirements for Internet Hosts - Application and Support</a>", STD 3, RFC 1123, DOI 10.17487/RFC1123, October 1989.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC3629">[RFC3629]</b>
      </td>
      <td class="top"><a>Yergeau, F.</a>, "<a href="http://tools.ietf.org/html/rfc3629">UTF-8, a transformation format of ISO 10646</a>", STD 63, RFC 3629, DOI 10.17487/RFC3629, November 2003.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC5198">[RFC5198]</b>
      </td>
      <td class="top"><a>Klensin, J.</a> and <a>M. Padlipsky</a>, "<a href="http://tools.ietf.org/html/rfc5198">Unicode Format for Network Interchange</a>", RFC 5198, DOI 10.17487/RFC5198, March 2008.</td>
    </tr>
    <tr>
      <td class="reference">
        <b id="RFC7252">[RFC7252]</b>
      </td>
      <td class="top"><a>Shelby, Z.</a>, <a>Hartke, K.</a> and <a>C. Bormann</a>, "<a href="http://tools.ietf.org/html/rfc7252">The Constrained Application Protocol (CoAP)</a>", RFC 7252, DOI 10.17487/RFC7252, June 2014.</td>
    </tr>
  </tbody>
</table>
<h1 id="rfc.acknowledgements">
  <a href="#rfc.acknowledgements">Acknowledgements</a>
</h1>
<p id="rfc.section.A.p.1">This document was split off from <a href="#I-D.ietf-core-resource-directory">[I-D.ietf-core-resource-directory]</a>.  TODO: Copy over relevant acknowledgements.</p>
<h1 id="rfc.authors">
  <a href="#rfc.authors">Author's Address</a>
</h1>
<div class="avoidbreak">
  <address class="vcard">
	<span class="vcardline">
	  <span class="fn">To Be Defined</span> 
	  <span class="n hidden">
		<span class="family-name">Defined</span>
	  </span>
	</span>
	<span class="org vcardline"></span>
	<span class="adr">
	  
	  <span class="vcardline">
		<span class="locality"></span> 
		<span class="region"></span>
		<span class="code"></span>
	  </span>
	  <span class="country-name vcardline"></span>
	</span>
	
  </address>
</div>

  <div class="github-fork-ribbon-wrapper"><div class="github-fork-ribbon"><a href="https://github.com/core-wg/rd-dns-sd">Fork me on GitHub</a></div></div>
</body>
</html>
